Реализовать API с использованием которое позволит удалять данные из реляционной БД  таблиц объемом 10 млн строк и более. Ключ, по которому производится удаление данных, столбец DateTime (удаляем старые данные). Работа системы не должна приводить к длительным блокировкам данных. АPI может вызываться несколькими внешними процессами одновременно. (1 процесс удаляет данные в 1 таблице). Необходимо обеспечить логирование работы API.  

------

1) Запустить генерацию SQL дампа для 2х таблиц:
go run ./cmd/smartit_remove_old_data_serviced -gen

В результате будут созданы 2 файла в папке ./scripts/sql
Если нужно поменять названия таблиц или кол-во генерируемых записей, то
это меняется в константах в файле  internal\cmdparams\process_gen_sql.go

2) создать 2 таблицы на основе дампа:
psql -U yourusername -d yourdatabasename -f tmp1.sql
psql -U yourusername -d yourdatabasename -f tmp2.sql

4) настроить подключение к БД в переменной окружения DB_CONN
по умолчанию значение  postgres://postgres:postgres@127.0.0.1:5432/mesh_group?sslmode=disable

5) запустить сервис:
go run ./cmd/smartit_remove_old_data_serviced

6) выполнить 2 запроса из Postman
[GET] localhost:2021/cleantable/tmp1
[GET] localhost:2021/cleantable/tmp2

Каждый запрос создаст легковесный thread (горутину), который в фоне будет удалять 
пачками по N штук (конфиг переменная TABLE_RECORDS_DEL_BATCHSIZE) записи, которые старше 30 
(конфиг переменная TABLE_RECORDS_LIFETIME_DAYS) дней.
Между запросами на удаление делаются паузы (конфиг переменная TABLE_RECORDS_REMOVE_PAUSE)
Горутины одновременно удаляют записи из нескольких таблиц.
Ведётся логирования числа удаленных записей для каждой таблицы + уведовление об успешном окончании очистки.
